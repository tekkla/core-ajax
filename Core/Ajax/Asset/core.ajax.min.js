var CORE=CORE||{};CORE.createNS=function(d){var e=d.split(".");var c=CORE;if(e[0]==="CORE"){e=e.slice(1)}for(var a=0;a<e.length;a++){var b=e[a];if(typeof c[b]==="undefined"){c[b]={}}c=c[b]}return c};CORE.createNS("CORE.AJAX");CORE.createNS("CORE.AJAX.COMMAND");CORE.AJAX.showLog=false;CORE.AJAX.clickSelector="*[data-ajax]";CORE.AJAX.errortarget="#core-message";CORE.AJAX.handler=function(){var a=false;var c=function(j,k){if(k===undefined){var k="log"}if(a){console[k](j)}};var h=function(j){a=j===true?true:false};var e=function(j){c(j);jQuery.each(j,function(l,k){if(l=="dom"){jQuery.each(k,function(n,m){if(jQuery(n).length){jQuery.each(m,function(p,o){if(jQuery.isFunction(jQuery()[o.f])){return jQuery(n)[o.f](o.a)}c('Unknown method/function "'+o.f+'"',"error")});return}c('Selector "'+n+'" not found.',"error")})}if(l=="act"){jQuery.each(k,function(m,n){switch(n.f){case"call":d(n.a[0],window,n.a[1]);break;default:d(n.f,window,n.a);break}})}})};var i=function(j,q,m,k){replaceDuplicates=true;if(j.indexOf("#")>0){var r=j.indexOf("#");urlhash=j.substring(j.indexOf("#"),j.length)}else{urlhash="";r=j.length}sourceUrl=j.substring(0,r);var l=sourceUrl.split("?");var o="";if(l.length>1){var s=l[1].split("&");for(var n=0;(n<s.length);n++){var p=s[n].split("=");if(!(replaceDuplicates&&(((p[0]==q))))){if(o==""){o="?"}else{o+="&"}o+=p[0]+"="+(p[1]?p[1]:"")}}}if(o==""){o="?"}if(k){o="?"+q+"="+m+(o.length>1?"&"+o.substring(1):"")}else{if(o!==""&&(((o!="?")))){o+="&"}o+=q+"="+(m?m:"")}return l[0]+o+urlhash};var g=function(l,k){var o=l.split("?");if(o.length>=2){var j=o.shift();var q=o.join("?");var p=encodeURIComponent(k)+"=";var n=q.split(/[&;]/g);for(var m=n.length;m-->0;){if(n[m].lastIndexOf(p,0)!==-1){n.splice(m,1)}}l=j+(n.length>1?"?"+n.join("&"):"")}return l};var d=function(o,l){var j=null;if(Object.prototype.toString.call(arguments[2])!=="[object Array]"){j=Array.prototype.slice.call(arguments,2)}else{j=arguments[2]}var n=o.split(".");var m=n.pop();for(var k=0;k<n.length;k++){l=l[n[k]]}return l[m].apply(l,j)};var f=function(l,n,m){var k=l!==undefined?l.responseText:"Ajax Request Error: "+n;var j=jQuery(CORE.AJAX.errortarget).length?CORE.AJAX.errortarget:"body";jQuery(j).html(k)};var b=function(j){if(j===undefined){c("Missing ajaxOptions. Aborting ajax.process()");return false}if(j.hasOwnProperty("success")===false){j.success=e}if(j.hasOwnProperty("dataType")===false){j.dataType="json"}if(j.hasOwnProperty("error")===false){j.error=f}if(j.url===false){var k="";switch(j.type){case"GET":k='Ajax GET: No URI to query found. Neither as "href", as "data-href" or "data-url". Aborting request.';break;case"POST":k='Ajax POST: No form action for submit found. Neither as "formaction" nor as "data-url", "data-href" from submitting button nor an "action" attribute from the form itself. Aborting request.';break}c(k,"error");return false}else{j.url=i(j.url,"ajax",1)}if((j.type=="POST")&&j.data===false){c('Ajax POST: No form id to submit found. Neither as "form" nor as "data-form" attribute. Aborting request.',"error");return false}c(j,"debug");jQuery.ajax(j);if(j.type!=="POST"&&j.pushState===true){history.pushState({},"",g(j.url,"ajax"))}};return{process:b,showLog:h,}};CORE.AJAX.getAjaxOptions=function(c){var b={};if(jQuery(c).data("ajax-options")!==undefined){b=jQuery(c).data("ajax-options")}var a={url:false,type:"GET",dataType:"json",data:false,pushState:true,cache:false};Object.keys(a).forEach(function(f,e){if(b.hasOwnProperty(f)===false){b[f]=a[f]}});if((b.url==false)||(b.url.length==0)){if(jQuery(c).data("form")===undefined&&jQuery(c).attr("form")===undefined){switch(true){case (jQuery(c).attr("href")!==undefined):b.url=jQuery(c).attr("href");break;case (jQuery(c).data("href")!==undefined):b.url=jQuery(c).data("href");break;case (jQuery(c).data("url")!==undefined):b.url=jQuery(c).data("url");break}}else{b.type="POST";var d=false;switch(true){case (jQuery(c).attr("form")!==undefined):d=jQuery(c).attr("form");break;case (jQuery(c).data("form")!==undefined):d=jQuery(c).data("form");break}if(d!==false){b.data=jQuery("#"+d).serialize()}switch(true){case (jQuery(c).attr("formaction")!==undefined):b.url=jQuery(c).attr("formaction");break;case (jQuery(c).data("href")!==undefined):b.url=jQuery(c).data("href");break;case (jQuery(c).data("url")!==undefined):b.url=jQuery(c).data("url");break;case (d!==false&&jQuery("#"+d).attr("action")!==undefined):b.url=jQuery("#"+d).attr("action");break}}}if(jQuery(c).data("no-state")!==undefined){b.pushState=false}return b};CORE.AJAX.COMMAND.error=function(a,b){jQuery(a).addClass("fade in").append("<p>"+b+"</p>");jQuery(a).bind("closed.bs.alert",function(){jQuery(this).removeClass().empty().unbind("closed.bs.alert")})};jQuery(document).on("click",CORE.AJAX.clickSelector,function(b){b.preventDefault();if(jQuery(this).attr("data-confirm")!==undefined){if(!confirm(jQuery(this).data("confirm"))){return false}}var a=CORE.AJAX.getAjaxOptions(this);var c=new CORE.AJAX.handler();c.showLog(CORE.AJAX.showLog);c.process(a)});