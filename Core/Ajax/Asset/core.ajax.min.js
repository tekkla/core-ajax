var CORE=CORE||{};CORE.createNS=function(r){var e=r.split("."),t=CORE;"CORE"===e[0]&&(e=e.slice(1));for(var a=0;a<e.length;a++){var o=e[a];"undefined"==typeof t[o]&&(t[o]={}),t=t[o]}return t},CORE.createNS("CORE.AJAX"),CORE.createNS("CORE.AJAX.COMMAND"),CORE.AJAX.showLog=!0,CORE.AJAX.clickSelector="*[data-ajax]",CORE.AJAX.handler=function(){var r=!1,e=function(e,t){if(void 0===t)var t="log";r&&console[t](e)},t=function(e){r=e===!0?!0:!1},a=function(r){e(r),jQuery.each(r,function(r,t){"dom"==r&&jQuery.each(t,function(r,t){return jQuery(r).length?void jQuery.each(t,function(t,a){return jQuery.isFunction(jQuery()[a.f])?jQuery(r)[a.f](a.a):void e('Unknown method/function "'+a.f+'"',"error")}):void e('Selector "'+r+'" not found.',"error")}),"act"==r&&jQuery.each(t,function(r,e){switch(e.f){case"call":u(e.a[0],window,e.a[1]);break;default:u(e.f,window,e.a)}})})},o=function(r,e,t,a){if(replaceDuplicates=!0,r.indexOf("#")>0){var o=r.indexOf("#");urlhash=r.substring(r.indexOf("#"),r.length)}else urlhash="",o=r.length;sourceUrl=r.substring(0,o);var u=sourceUrl.split("?"),n="";if(u.length>1)for(var i=u[1].split("&"),s=0;s<i.length;s++){var c=i[s].split("=");replaceDuplicates&&c[0]==e||(""==n?n="?":n+="&",n+=c[0]+"="+(c[1]?c[1]:""))}return""==n&&(n="?"),a?n="?"+e+"="+t+(n.length>1?"&"+n.substring(1):""):(""!==n&&"?"!=n&&(n+="&"),n+=e+"="+(t?t:"")),u[0]+n+urlhash},u=function(r,e){for(var t=[].slice.call(arguments).splice(2),a=r.split("."),o=a.pop(),u=0;u<a.length;u++)e=e[a[u]];return e[o].apply(e,t)},n=function(r,e,t){var a=void 0!==r?r.responseText:"Ajax Request Error: "+e;jQuery("body").prepend(a)},i=function(r){if(void 0===r)return e("Missing ajaxOptions. Aborting ajax.process()"),!1;if(r.hasOwnProperty("success")===!1&&(r.success=a),r.hasOwnProperty("dataType")===!1&&(r.dataType="json"),r.hasOwnProperty("error")===!1&&(r.error=n),r.url===!1){var t="";switch(r.type){case"GET":t='Ajax GET: No URI to query found. Neither as "href", as "data-href" or "data-url". Aborting request.';break;case"POST":t='Ajax POST: No form action for submit found. Neither as "formaction" nor as "data-url", "data-href" from submitting button nor an "action" attribute from the form itself. Aborting request.'}return e(t,"error"),!1}return r.url=o(r.url,"ajax",1),"POST"==r.type&&r.data===!1?(e('Ajax POST: No form id to submit found. Neither as "form" nor as "data-form" attribute. Aborting request.',"error"),!1):(e(r,"debug"),jQuery.ajax(r),void("POST"!==r.type&&r.pushState===!0&&history.pushState({},"",r.url)))};return{process:i,showLog:t}},CORE.AJAX.getAjaxOptions=function(r){if(void 0!==jQuery(r).data("ajax-options"))var e=jQuery(r).data("ajax-options");else var e={};var t={url:!1,type:"GET",dataType:"json",data:!1,pushState:!0,cache:!1};if(Object.keys(t).forEach(function(r,a){e.hasOwnProperty(r)===!1&&(e[r]=t[r])}),void 0===jQuery(r).data("form")&&void 0===jQuery(r).attr("form"))switch(!0){case void 0!==jQuery(r).attr("href"):e.url=jQuery(r).attr("href");break;case void 0!==jQuery(r).data("href"):e.url=jQuery(r).data("href");break;case void 0!==jQuery(r).data("url"):e.url=jQuery(r).data("url")}else{e.type="POST";var a=!1;switch(!0){case void 0!==jQuery(r).attr("form"):a=jQuery(r).attr("form");break;case void 0!==jQuery(r).data("form"):a=jQuery(r).data("form")}switch(a!==!1&&(e.data=jQuery("#"+a).serialize()),!0){case void 0!==jQuery(r).attr("formaction"):e.url=jQuery(r).attr("formaction");break;case void 0!==jQuery(r).data("href"):e.url=jQuery(r).data("href");break;case void 0!==jQuery(r).data("url"):e.url=jQuery(r).data("url");break;case a!==!1&&void 0!==jQuery("#"+a).attr("action"):e.url=jQuery("#"+a).attr("action")}}return void 0!==jQuery(this).data("no-state")&&(e.pushState=!1),e},CORE.AJAX.COMMAND.error=function(r,e){jQuery(r).addClass("fade in").append("<p>"+e+"</p>"),jQuery(r).bind("closed.bs.alert",function(){jQuery(this).removeClass().empty().unbind("closed.bs.alert")})},jQuery(document).on("click",CORE.AJAX.clickSelector,function(r){if(r.preventDefault(),void 0!==jQuery(this).attr("data-confirm")&&!confirm(jQuery(this).data("confirm")))return!1;if(void 0!==jQuery(this).attr("data-ajax")){var e=CORE.AJAX.getAjaxOptions(this),t=new CORE.AJAX.handler;t.showLog(CORE.AJAX.showLog),t.process(e)}});